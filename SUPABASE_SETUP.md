# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –¥–ª—è DreamBox

## üéØ –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Supabase

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [supabase.com](https://supabase.com)
2. –ù–∞–∂–º–∏—Ç–µ **Start your project** –∏ –≤–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ GitHub
3. –ù–∞–∂–º–∏—Ç–µ **New project**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - **Name**: `dreambox`
   - **Database Password**: —Å–æ–∑–¥–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å (—Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ!)
   - **Region**: –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π —Ä–µ–≥–∏–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Europe (Frankfurt)`)
5. –ù–∞–∂–º–∏—Ç–µ **Create new project**
6. –ü–æ–¥–æ–∂–¥–∏—Ç–µ ~2 –º–∏–Ω—É—Ç—ã –ø–æ–∫–∞ –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞—Å—Ç—Å—è

---

## üìä –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Table Editor**
2. –ù–∞–∂–º–∏—Ç–µ **Create a new table**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - **Name**: `dreams`
   - –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é **Enable Row Level Security (RLS)**

4. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏ (–Ω–∞–∂–º–∏—Ç–µ **Add column** –¥–ª—è –∫–∞–∂–¥–æ–π):

| Name | Type | Default Value | Primary | Extra |
|------|------|---------------|---------|-------|
| `id` | uuid | `gen_random_uuid()` | ‚úÖ Primary | - |
| `created_at` | timestamptz | `now()` | - | - |
| `updated_at` | timestamptz | `now()` | - | - |
| `user_id` | uuid | - | - | Foreign Key ‚Üí auth.users |
| `dream_name` | text | - | - | - |
| `image_url` | text | `''` | - | - |
| `target_amount` | numeric | - | - | - |
| `time_value` | int4 | - | - | - |
| `time_unit` | text | - | - | - |
| `saved_amount` | numeric | `0` | - | - |
| `start_date` | timestamptz | `now()` | - | - |
| `last_saved_date` | text | - | - | nullable |

5. –ù–∞–∂–º–∏—Ç–µ **Save**

---

## üîê –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Row Level Security (RLS)

1. –í **Table Editor** –Ω–∞–π–¥–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É `dreams`
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ (...) ‚Üí **View policies**
3. –ù–∞–∂–º–∏—Ç–µ **New policy**
4. –í—ã–±–µ—Ä–∏—Ç–µ **Create policy from scratch**

### –ü–æ–ª–∏—Ç–∏–∫–∞ 1: SELECT (—á—Ç–µ–Ω–∏–µ)
```sql
CREATE POLICY "Users can view own dreams"
ON dreams FOR SELECT
USING (auth.uid() = user_id);
```

### –ü–æ–ª–∏—Ç–∏–∫–∞ 2: INSERT (—Å–æ–∑–¥–∞–Ω–∏–µ)
```sql
CREATE POLICY "Users can create own dreams"
ON dreams FOR INSERT
WITH CHECK (auth.uid() = user_id);
```

### –ü–æ–ª–∏—Ç–∏–∫–∞ 3: UPDATE (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
```sql
CREATE POLICY "Users can update own dreams"
ON dreams FOR UPDATE
USING (auth.uid() = user_id);
```

### –ü–æ–ª–∏—Ç–∏–∫–∞ 4: DELETE (—É–¥–∞–ª–µ–Ω–∏–µ)
```sql
CREATE POLICY "Users can delete own dreams"
ON dreams FOR DELETE
USING (auth.uid() = user_id);
```

**–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Å–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π —á–µ—Ä–µ–∑ SQL Editor:**

```sql
-- –í–∫–ª—é—á–∏—Ç—å RLS
ALTER TABLE dreams ENABLE ROW LEVEL SECURITY;

-- –ü–æ–ª–∏—Ç–∏–∫–∏
CREATE POLICY "Users can view own dreams"
  ON dreams FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can create own dreams"
  ON dreams FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own dreams"
  ON dreams FOR UPDATE
  USING (auth.uid() = user_id);

CREATE POLICY "Users can delete own dreams"
  ON dreams FOR DELETE
  USING (auth.uid() = user_id);
```

---

## üîë –®–∞–≥ 4: –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Project Settings** (–∏–∫–æ–Ω–∫–∞ —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏)
2. –í—ã–±–µ—Ä–∏—Ç–µ **API**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:

   - **Project URL** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://xxxxx.supabase.co`)
   - **anon public** key (–¥–ª–∏–Ω–Ω—ã–π –∫–ª—é—á, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `eyJ...`)

---

## üíª –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
VITE_SUPABASE_URL=–≤–∞—à_project_url
VITE_SUPABASE_ANON_KEY=–≤–∞—à_anon_key
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `.env` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore` (—É–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å)

---

## üîê –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Authentication

1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Authentication**
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Providers**
3. –ù–∞–π–¥–∏—Ç–µ **Email** –∏ –≤–∫–ª—é—á–∏—Ç–µ –µ–≥–æ:
   - **Enable Email provider**: ‚úÖ
   - **Confirm email**: ‚¨ú (–º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
4. –ù–∞–∂–º–∏—Ç–µ **Save**

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
- **Settings** ‚Üí **Auth** ‚Üí **Email Auth**:
  - **Enable email confirmations**: –û—Ç–∫–ª—é—á–∏—Ç–µ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
  - **Secure email change**: –í–∫–ª—é—á–∏—Ç–µ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## üöÄ –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets (–¥–ª—è –¥–µ–ø–ª–æ—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
3. –ù–∞–∂–º–∏—Ç–µ **New repository secret** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ:

   - **Name**: `VITE_SUPABASE_URL`  
     **Value**: –≤–∞—à Project URL
   
   - **Name**: `VITE_SUPABASE_ANON_KEY`  
     **Value**: –≤–∞—à anon public key

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
npm run dev
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
1. –°—Ç—Ä–∞–Ω–∏—Ü—É **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞—Ö–æ–¥–µ
2. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
4. –°—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ–∑–¥–∞–Ω–∏—è –º–µ—á—Ç—ã

---

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Supabase"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª `.env` —Å–æ–∑–¥–∞–Ω –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `VITE_`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev-—Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è `.env`

### –û—à–∏–±–∫–∞: "Invalid API key"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤ –≤ `.env`

### –û—à–∏–±–∫–∞: "Row Level Security policy violation"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–æ–ª–∏—Ç–∏–∫–∏ RLS —Å–æ–∑–¥–∞–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `dreams` –∏–º–µ–µ—Ç –∫–æ–ª–æ–Ω–∫—É `user_id`

### –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- –û—Ç–∫—Ä–æ–π—Ç–µ **Table Editor** ‚Üí **dreams** –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Supabase](https://supabase.com/docs)
- [Supabase Auth](https://supabase.com/docs/guides/auth)
- [Row Level Security](https://supabase.com/docs/guides/auth/row-level-security)

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- ‚úÖ –ò–º–µ–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ email/password
- ‚úÖ –•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –æ–±–ª–∞—á–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ó–∞—â–∏—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ RLS
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ GitHub Pages
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

